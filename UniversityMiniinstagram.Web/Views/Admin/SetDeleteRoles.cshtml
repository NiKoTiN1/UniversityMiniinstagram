@inject IViewLocalizer VLocalizer
@model List<UserRolesViewModel>
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block shadow-sm" style="margin-top: 40px; width: 190px; height: 100%;
    position: fixed;
    top: 0;">
    <div class="sidebar-sticky pt-3">
        <ul class="nav flex-column" style="background-color:white;">
            <li class="nav-item">
                <a class="nav-link active" style="color:black;" asp-controller="Admin" asp-action="GetPostReports">
                    @VLocalizer["PostReports"] <span class="sr-only">(current)</span>
                </a>
            </li>
            <li class="nav-item" style="background-color:white;">
                <a class="nav-link" style="color: black;" asp-controller="Admin" asp-action="GetCommentReports">
                    @VLocalizer["CommentReports"]
                </a>
            </li>
            <li class="nav-item" style="background-color:#343a40;">
                <a class="nav-link" style="color: white;" asp-controller="Admin" asp-action="SetDeleteRoles">
                    @VLocalizer["Roles"]
                </a>
            </li>
        </ul>
    </div>
</nav>

<div class="centeredSt" style="padding-left: 200px; min-width: 90%;">
    @foreach (var elem in Model)
    {
        @await Component.InvokeAsync("RoleLine", new { vm = elem })
    }
</div>

@section Scripts{
    <script type="text/javascript">
        $('.Moder').click(function () {
            var userId = $(this).attr("id");
            userId = userId.replace('Moder', '');
            var unModer = '#UnModer' + userId;
            $.ajax({
                type: 'POST',
                url:'@Url.Content("~/admin/moderroots")',
                data: { 'userId': userId },
                success: function (data) {
                    $('#Moder' + userId).hide();
                    $(unModer).show();
                }
            });
        });

        $('.UnModer').click(function () {
            var userId = $(this).attr("id");
            userId = userId.replace('UnModer', '');
            var Moder = '#Moder' + userId;
             $.ajax({
                type: 'POST',
                url: '@Url.Content("~/admin/userroots")',
                data: { 'userId': userId },
                success: function (data) {
                    $('#UnModer' + userId).hide();
                    $(Moder).show();                }
            });
        });

        $('.AddBan').click(function () {
            var banId = $(this).attr("id");
            var userId = banId.replace('AddBan', '');
            var unBan = '#UnBan' + userId;
            var userRoleId = '#UnModer' + userId;
            var moderatorRole = '#Moder' + userId;
             $.ajax({
                type: 'POST',
                url: '@Url.Content("~/account/ban")',
                data: { 'userId': userId },
                success: function (data) {
                    $('#' + banId).hide();
                    $(unBan).show();
                    $(userRoleId).hide();
                    $(moderatorRole).hide();
                }
            });
        });

        $('.UnBan').click(function () {
            var unBan = $(this).attr("id");
            var userId = unBan.replace('UnBan', '');
            var ban = '#AddBan' + userId;
            var moderatorRole = '#Moder' + userId;
            $.ajax({
                type: 'POST',
                url: '@Url.Content("~/account/unban")',
                data: { 'userId': userId },
                success: function (data) {
                    $(ban).show();
                    $(moderatorRole).show();
                    $('#' + unBan).hide();
                }
            });
        });
    </script>
}